---
# vars file for kernel

kernel_unarchive_src: "https://cdn.kernel.org/pub/linux/kernel/v{{ kernel_version.split('.')[0] }}.x/linux-{{ kernel_version }}.tar.xz"

kernel_unarchive_creates: "{{ kernel_build_location }}/linux-{{ kernel_version }}"

_kernel_requirements:
  default:
    - bc
    - bison
    - elfutils-libelf-devel
    - flex
    - openssl-devel
  Alpine:
    - bc
    - bison
    - flex
    - elfutils-dev
    - openssl-dev
  Archlinux:
    - bc
    - bison
    - libelf
    - flex
    - openssl
  Debian:
    - bc
    - bison
    - flex
    - libelf-dev
    - libssl-dev
  Fedora:
    - bc
    - bison
    - elfutils-libelf-devel
    - flex
    - hostname
    - kernel-devel
    - openssl-devel
  openSUSE Leap:
    - bc
    - bison
    - libelf-devel
    - flex
    - openssl-devel
  Ubuntu:
    - bc
    - bison
    - flex
    - libelf-dev
    - libssl-dev

kernel_requirements: "{{ _kernel_requirements[ansible_distribution] | default(_kernel_requirements['default']) }}"

_kernel_modules_location:
  default: /usr/lib/modules/{{ kernel_version }}
  Alpine: /lib/modules/{{ kernel_version }}
  Archlinux: /usr/lib/modules/{{ kernel_version }}
  Debian: /lib/modules/{{ kernel_version }}
  Fedora: /usr/lib/modules/{{ kernel_version }}
  openSUSE Leap: /lib/modules/{{ kernel_version }}
  Ubuntu: /lib/modules/{{ kernel_version }}

kernel_modules_location: "{{ _kernel_modules_location[ansible_distribution] | default(_kernel_modules_location['default']) }}"

_kernel_installation_location:
  default: /boot/vmlinuz
  Alpine: /boot/vmlinuz
  Archlinux: /boot/vmlinuz
  Debian: /boot/vmlinuz-{{ kernel_version }}
  Fedora: /boot/vmlinuz
  Ubuntu: /boot/vmlinuz-{{ kernel_version }}

kernel_installation_location: "{{ _kernel_installation_location[ansible_distribution] | default(_kernel_installation_location['default']) }}"
